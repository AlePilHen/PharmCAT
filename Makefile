MAKEFLAGS = -j1

# Determine this makefile's path.
# Be sure to place this BEFORE `include` directives, if any.
THIS_FILE := $(lastword $(MAKEFILE_LIST))

ifeq ($(OS),Windows_NT)
	GRADLE_CMD := cmd /c gradlew.bat
else
	GRADLE_CMD := ./gradlew
endif


.PHONY: vcfTests
vcfTests:
	rm -rf build/testVcf build/autogeneratedTestResults
	${GRADLE_CMD} extractPositionsForTest
	src/scripts/generate_vcf_test_data.sh
	${GRADLE_CMD} testAutogeneratedVcfs
	cd build; zip -r vcfTest-`date +'%Y-%m-%d'`.zip autogeneratedTestResults
